---
title: "Adding a New Content System"
description: "Step-by-step guide to add a new documentation collection"
---

# Adding a New Content System

This guide shows how to add a new content collection (like "guides", "tutorials", or "api-docs") to CelestialDocs.

## Example: Adding a "Guides" Collection

### Step 1: Register the System in Configuration

Edit `data/config.ts`:

```typescript
export const CONTENT: ContentConfig = {
    systems: [
        {
            id: "docs",
            dir: "content/docs",
            defaultDocRedirect: "/docs/getting-started/introduction",
            route: "/docs",
        },
        {
            id: "notes",
            dir: "notes",
            defaultDocRedirect: "/notes/getting-started",
            route: "/notes",
        },
        // Add the new collection here:
        {
            id: "guides",
            dir: "content/guides",
            defaultDocRedirect: "/guides/getting-started",
            route: "/guides",
        },
    ],
};
```

**Key fields**:
- `id` - Unique identifier for the system
- `dir` - Directory containing content files
- `route` - URL base path
- `defaultDocRedirect` - Where `/guides` redirects to

### Step 2: Create Content Directory

```bash
mkdir -p content/guides
```

Create your first files:

```
content/guides/
├── index.md                 # Root page
├── getting-started.md       # Default redirect target
├── basic-guide.md
├── advanced/
│   ├── patterns.md
│   └── best-practices.md
└── faq.md
```

**Example** `content/guides/getting-started.md`:

```yaml
---
title: "Getting Started with Guides"
description: "Start here to learn about guides"
navLabel: "Getting Started"
---

# Getting Started with Guides

Welcome to the guides collection!

...content...
```

### Step 3: Configure Navigation

Edit `data/config.ts` and add navigation structure to `SIDEBAR_NAVIGATION`:

```typescript
export const SIDEBAR_NAVIGATION: SidebarNavigation = {
    docs: {
        // ... existing docs config
    },
    notes: {
        // ... existing notes config
    },
    // Add the new collection:
    guides: {
        defaultTab: {
            label: "Guides",
            icon: "book",
        },
        groups: [
            {
                id: "getting-started",
                label: "Getting Started",
                icon: "rocket",
                autoGenerated: true,
                entries: [
                    { slug: "getting-started" },
                ],
            },
            {
                id: "basic",
                label: "Basic Guides",
                icon: "file-text",
                autoGenerated: true,
                entries: [
                    { slug: "basic-guide" },
                ],
            },
            {
                id: "advanced",
                label: "Advanced Topics",
                icon: "code",
                autoGenerated: true,
                groups: [
                    {
                        id: "patterns",
                        label: "Patterns",
                        icon: "grid",
                        autoGenerated: true,
                    },
                ],
            },
            {
                id: "meta",
                label: "Meta",
                icon: "info",
                autoGenerated: true,
                entries: [
                    { slug: "faq" },
                ],
            },
        ],
    },
};
```

### Step 4 (Optional): Add Header Navigation Link

Edit `HEADER_NAV_ITEMS` in `data/config.ts`:

```typescript
export const HEADER_NAV_ITEMS: NavItem[] = [
    { href: "/docs", label: "Docs", special: true },
    { href: "/notes", label: "Notes" },
    { href: "/guides", label: "Guides" },  // New line
];
```

### Step 5: Build and Test

```bash
npm run build
npm run preview
```

**Verify**:
- [ ] `/guides` loads and redirects to `/guides/getting-started`
- [ ] `/guides/getting-started` displays content
- [ ] Sidebar shows correct structure
- [ ] Breadcrumbs display correctly
- [ ] "View as Markdown" button links to correct endpoint
- [ ] Header shows "Guides" link (if added)

## Configuration Reference

### Complete System Configuration

```typescript
interface ContentSystem {
    id: string;                    // Unique identifier
    dir: string;                   // Content directory
    defaultDocRedirect: string;    // Default redirect path
    route: string;                 // URL base path
}
```

### Sidebar Group Configuration

```typescript
interface Group {
    id: string;                   // Unique within system
    label: string;                // Display name
    icon?: string;                // Icon name (from icon library)
    path?: string;                // Optional path
    tab?: boolean;                // Display as tab
    autoGenerated?: boolean;       // Auto-include directory contents
    groups?: Group[];              // Nested groups
    entries?: Entry[];            // Manual entries
}

interface Entry {
    slug: string;                 // File slug (e.g., "guides/intro")
    label?: string;               // Custom display name
    icon?: string;                // Custom icon
    hidden?: boolean;             // Hide from navigation
}
```

## Content File Format

### Required Frontmatter

```yaml
---
title: "Page Title"
description: "SEO description"
---
```

### Optional Frontmatter

```yaml
---
title: "Page Title"
description: "SEO description"
navLabel: "Nav Label"         # Custom sidebar label
navIcon: "icon-name"          # Custom sidebar icon
navHidden: false              # Hide from navigation
authors: ["Author Name"]      # Authors list
draft: false                  # Mark as draft
hide_breadcrumbs: false       # Hide breadcrumbs on page
---
```

## Routing

Once configured, the following routes are automatically generated:

```
Route                      File
/guides                    → content/guides/index.md (redirect)
/guides/getting-started    → content/guides/getting-started.md
/guides/basic-guide        → content/guides/basic-guide.md
/guides/advanced/patterns  → content/guides/advanced/patterns.md
/guides/faq                → content/guides/faq.md

/guides/*.md               → Markdown download endpoints
```

## Navigation Structure

Your sidebar automatically reflects the structure you define:

```
Guides (defaultTab)
├─ Getting Started
│  └─ Getting Started [link]
├─ Basic Guides
│  └─ Basic Guide [link]
├─ Advanced Topics
│  └─ Patterns
│     └─ [auto-generated entries]
└─ Meta
   └─ FAQ [link]
```

## Type Safety

TypeScript will validate your configuration:

```typescript
import type { ContentSystem } from "@/lib/types";
import type { SidebarNavigation } from "@/lib/docs/types";

export const CONTENT: ContentConfig = { /* ... */ };
export const SIDEBAR_NAVIGATION: SidebarNavigation = { /* ... */ };
```

**If configuration is invalid**, you'll get TypeScript errors at build time.

## Common Patterns

### Flat Collection (like Notes)

```typescript
guides: {
    defaultTab: { label: "Guides", icon: "book" },
    groups: [
        {
            id: "guides",
            path: "",
            label: "Guides",
            icon: "note",
            tab: true,
            autoGenerated: true,
        },
    ],
},
```

### Tabbed Collection (like Docs)

```typescript
guides: {
    defaultTab: { label: "Guides", icon: "book" },
    groups: [
        {
            id: "basics",
            label: "Basics",
            icon: "rocket",
            tab: true,
            autoGenerated: true,
        },
        {
            id: "reference",
            label: "Reference",
            icon: "file-text",
            tab: true,
            autoGenerated: true,
        },
    ],
},
```

### With Manual Entries

```typescript
guides: {
    defaultTab: { label: "Guides", icon: "book" },
    groups: [
        {
            id: "featured",
            label: "Featured",
            icon: "star",
            autoGenerated: false,
            entries: [
                { slug: "getting-started", label: "Quick Start" },
                { slug: "installation", label: "Installation" },
            ],
        },
    ],
},
```

## Troubleshooting

### Sidebar not showing

**Check**:
1. System registered in `CONTENT.systems`
2. Navigation structure defined in `SIDEBAR_NAVIGATION[systemId]`
3. Files exist in content directory
4. Build completed without errors

### Links pointing to wrong URL

**Check**:
1. `route` property is set correctly
2. Component receives `collectionId` prop
3. `resolveSystem(collectionId)` returns correct system

### Content not rendering

**Check**:
1. File frontmatter is valid YAML
2. File is in correct directory
3. Filename matches slug in navigation
4. No `draft: true` in frontmatter (unless intentional)

## Next Steps

- Customize your collection by adding more content files
- Adjust sidebar structure to match your content organization
- Add custom styling via Tailwind CSS
- Create a [README.md](../../README.md) for your collection
- Consider adding collection-specific examples

---

For more information, see:
- [Multi-Collection Migration Guide](./multi-collection-migration)
- [Config Reference](../developer/config-reference)
- [Content Collections Guide](../developer/content-collections)
