---
import { Icon } from "astro-icon/components";
import { Button } from "@/components/ui/button";
import type { LayoutWidthToggleProps } from "@/lib/types";

// Component accepts no props
Astro.props as LayoutWidthToggleProps;
---

<Button
    id="layout-width-toggle"
    variant="ghost"
    size="icon"
    className="hidden md:inline-flex"
    aria-label="Toggle layout width"
    aria-pressed="false"
    title="Wide"
>
    <Icon name="spacing" class="size-5" aria-hidden="true" />
</Button>

<script>
    import { initLayoutToggle } from "@/lib/layout";

    document.addEventListener("astro:page-load", initLayoutToggle);
</script>

<script is:inline>
    (function () {
        const saved = localStorage.getItem("layout-width-mode");
        const mode = saved === "comfort" ? "comfort" : "wide";
        document.body.dataset.layout = mode;
    })();
</script>
