---
import type { Tab } from "@/lib/navigation";

interface Props {
    tabs: Tab[];
    activeTabId: string;
    currentSlug: string;
}

const { tabs, activeTabId, currentSlug } = Astro.props;

// Helper to find first entry in a group
function findFirstEntry(group: any): string | null {
    if (group.entries && group.entries.length > 0) {
        return group.entries[0].slug;
    }
    if (group.groups && group.groups.length > 0) {
        for (const subgroup of group.groups) {
            const entry = findFirstEntry(subgroup);
            if (entry) return entry;
        }
    }
    return null;
}
---

<div class="border-b border-border">
    <nav class="flex gap-1 px-4" aria-label="Documentation sections">
        {
            tabs.map((tab) => {
                const isActive = tab.id === activeTabId;
                const firstEntry = findFirstEntry(tab.group);
                const href = firstEntry ? `/docs/${firstEntry}` : `/docs`;

                return (
                    <a
                        href={href}
                        class={`
            relative px-4 py-2 text-sm font-medium transition-colors
            ${
                isActive
                    ? "text-foreground"
                    : "text-muted-foreground hover:text-foreground"
            }
          `}
                        aria-current={isActive ? "page" : undefined}
                    >
                        {tab.icon && (
                            <span class="mr-2" aria-hidden="true">
                                {tab.icon}
                            </span>
                        )}
                        {tab.label}
                        {isActive && (
                            <span class="absolute bottom-0 left-0 right-0 h-0.5 bg-primary" />
                        )}
                    </a>
                );
            })
        }
    </nav>
</div>

<style>
    nav a {
        border-radius: 0.375rem 0.375rem 0 0;
    }
</style>
